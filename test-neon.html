<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Client Test</title>
    <script src="dist/neon-client.js"></script>
</head>
<body>
    <h1>ğŸ§ª Neon Client Test</h1>
    <div id="status">Loading...</div>
    <div id="debug"></div>
    
    <script>
        const statusDiv = document.getElementById('status');
        const debugDiv = document.getElementById('debug');
        
        function log(message) {
            console.log(message);
            debugDiv.innerHTML += '<div>' + message + '</div>';
        }
        
        function updateStatus(message, isError = false) {
            statusDiv.innerHTML = message;
            statusDiv.style.color = isError ? 'red' : 'green';
        }
        
        log('ğŸš€ Starting Neon client test...');
        
        // Test Neon client availability
        function testNeonClient() {
            log('ğŸ” Testing Neon client availability...');
            
            if (window.neonClient) {
                log('âœ… window.neonClient found');
                return true;
            } else if (window.neon) {
                log('âœ… window.neon found');
                return true;
            } else {
                log('âŒ No Neon client found in window object');
                return false;
            }
        }
        
        // Wait for DOM to load and test
        document.addEventListener('DOMContentLoaded', () => {
            log('ğŸ“„ DOM loaded, testing Neon client...');
            
            // Try immediate test
            if (testNeonClient()) {
                updateStatus('âœ… Neon client loaded successfully!');
                log('ğŸ‰ Neon client is working!');
            } else {
                updateStatus('âš ï¸ Neon client not found, waiting...', true);
                
                // Wait a bit more and try again
                setTimeout(() => {
                    log('â° Timeout reached, testing again...');
                    if (testNeonClient()) {
                        updateStatus('âœ… Neon client loaded after timeout!');
                        log('ğŸ‰ Neon client is working after timeout!');
                    } else {
                        updateStatus('âŒ Neon client failed to load', true);
                        log('ğŸ’¥ Failed to load Neon client');
                        
                        // Show what's available on window
                        const windowKeys = Object.keys(window).filter(key => 
                            key.includes('neon') || key.includes('Neon')
                        );
                        log('ğŸ” Available window keys: ' + JSON.stringify(windowKeys));
                    }
                }, 3000);
            }
        });
        
        // Also try immediately in case DOM is already loaded
        if (document.readyState !== 'loading') {
            log('ğŸ“„ DOM already loaded, testing immediately...');
            if (testNeonClient()) {
                updateStatus('âœ… Neon client loaded immediately!');
                log('ğŸ‰ Neon client is working immediately!');
            }
        }
    </script>
</body>
</html>
